(this.webpackJsonpfindyGui=this.webpackJsonpfindyGui||[]).push([[0],{122:function(e){e.exports=JSON.parse('{"a":"findyGui"}')},257:function(e,t,n){"use strict";n.r(t);var o=n(153),c=n(0),r=n(30),a=n(262),i=n(1),s=n.p+"static/media/Payment.520c59e4.svg",l=n.p+"static/media/PaymentSelected.f28be684.svg",d=n.p+"static/media/Clients.e02581c7.svg",u=n.p+"static/media/ClientsSelected.f0009662.svg",j=n.p+"static/media/More.ec103ff1.svg",b=n.p+"static/media/MoreSelected.fa7e04c2.svg",f=n.p+"static/media/QrCode.ed1c23a7.svg",p=n.p+"static/media/QrCodeSelected.623bdbd9.svg",x=n(263),O=n(27),h="#003580",g="#FDB916",m="#737373",v="/api";"web"!==O.a.OS&&(v="http://localhost:4000/api");var S=v,y="";"web"!==O.a.OS&&(y="http://localhost:4000");var k,w,C,B,z,T,I,E,P,A,V,H,W,F,R,M,G,L,J,N=y,Q=n(25),Y=n.n(Q),D=n(33),U=n(14),q=n(8),K=n(3),X=n(18),Z=n(96),$=n(95),_=n(19),ee=n(131),te=n(63),ne=n(130),oe=(_.a.Text(k||(k=Object(X.a)(["\n  fontStyle: normal;\n  fontWeight: bold;\n  fontSize: 17px;\n  lineHeight: 22px;\n  color: ",";\n"])),(function(e){var t=e.color;return t||"black"})),_.a.Text(w||(w=Object(X.a)(["\n  fontStyle: normal;\n  fontWeight: 700;\n  fontSize: 15px;\n  lineHeight: 22px;\n  color: ",";\n  marginTop: ",";\n"])),(function(e){var t=e.color;return t||"black"}),(function(e){var t=e.marginTop;return t||"0px"}))),ce=(_.a.Text(C||(C=Object(X.a)(["\n  fontStyle: normal;\n  fontWeight: 500;\n  fontSize: 13px;\n  lineHeight: 15.6px;\n  color: ",";\n"])),(function(e){var t=e.color;return t||"black"})),_.a.Text(B||(B=Object(X.a)(["\n  fontStyle: normal;\n  fontSize: 10px;\n  lineHeight: 10px;\n  color: ",";\n"])),(function(e){var t=e.color;return t||"black"})),_.a.Text(z||(z=Object(X.a)(["\n  fontStyle: normal;\n  fontSize: 15px;\n  fontWeight: 400;\n  lineHeight: 22px;\n  color: ",";\n"])),(function(e){var t=e.color;return t||"black"}))),re=(_.a.Text(T||(T=Object(X.a)(["\n  fontStyle: normal;\n  fontSize: 17px;\n  fontWeight: 700;\n  lineHeight: 22px;\n  color: ",";\n"])),(function(e){var t=e.color;return t||"black"})),_.a.Text(I||(I=Object(X.a)(["\n  fontStyle: normal;\n  fontSize: 16px;\n  fontWeight: bold;\n  lineHeight: 22px;\n  color: ",";\n"])),(function(e){var t=e.color;return t||"black"})),_.a.Text(E||(E=Object(X.a)(["\n  fontStyle: normal;\n  fontSize: 32px;\n  fontWeight: 700;\n  lineHeight: 38px;\n  color: ",";\n"])),h),_.a.View(P||(P=Object(X.a)(["\n  width: ",";\n  height: ",";\n"])),(function(e){var t=e.size;return t||"16px"}),(function(e){var t=e.size;return t||"16px"}))),ae=_.a.View(A||(A=Object(X.a)(["\n  height: 10px;\n  width: 10px;\n  borderRadius: 5px;\n  backgroundColor: ","\n"])),(function(e){var t=e.color;return t||g})),ie=n(5),se=function(e){var t=e.item,n=e.onPress,o=e.expanded;if(console.log(t,n,o),!t)return null;var c=t.archived,r=void 0!==c&&c,a=t.title,i=t.newItem,s=r?m:"black",l=_.a.View(V||(V=Object(X.a)(["\n    flex-direction: row;\n  "]))),d=_.a.View(H||(H=Object(X.a)(["\n    padding-top: 6px;\n    padding-left: 8px;\n  "]))),u=_.a.View(W||(W=Object(X.a)(["\n    padding-vertical: 8px;\n    border-top-width: 1px;\n    border-bottom-width: 1px;\n    border-color: ",";\n    flex-direction: row;\n    justify-content: space-between;\n    padding-right: 12px;\n  "])),"#E0E0E0"),j=_.a.View(F||(F=Object(X.a)(["\n    padding-horizontal: 4px;\n  "]))),b=_.a.View(R||(R=Object(X.a)(["\n    margin-top: 8px;\n    padding-bottom: 8px;\n  "]))),f=function(){return Object(ie.jsx)(d,{children:Object(ie.jsx)(ae,{})})};return Object(ie.jsx)(ee.a,{onPress:function(e){return n(e)},children:Object(ie.jsxs)(j,{children:[Object(ie.jsxs)(u,{children:[Object(ie.jsxs)(l,{children:[Object(ie.jsx)(oe,{color:s,children:a}),Object(ie.jsx)(re,{size:"4px"}),Object(ie.jsx)(ce,{color:s,children:"text"})]}),i?Object(ie.jsx)(f,{}):null]}),o?Object(ie.jsxs)(b,{children:[Object(ie.jsx)(te.a,{children:"MOAR STUFF"}),Object(ie.jsx)(ne.a,{title:"Poista"})]}):null]})})},le=_.a.View(M||(M=Object(X.a)(["\n  background-color: ",";\n  margin-top: 4px;\n  margin-bottom: 4px;\n  padding-vertical: 4px;\n  padding-horizontal: 4px;\n"])),"#EBEBEB"),de=_.a.Text(G||(G=Object(X.a)(["\n  color: ",";\n  font-weight: 700;\n"])),m),ue=_.a.View(L||(L=Object(X.a)(["\n  background-color: white;\n"]))),je=function(e){var t=e.text;e.additionalText;return Object(ie.jsx)(le,{children:Object(ie.jsx)(de,{children:t})})},be=function(e){var t=e.data,n=e.renderItem,o=e.sections,c=void 0!==o&&o,r=t,a=function(e){console.log("pressed")};if(c){console.log("arranging for sections");var i=t.map((function(e){return{title:e.title[0],data:e}}));if(console.log("sectioned",i),i&&i.length>0){var s=new Map;i.forEach((function(e){var t=e.title[0];s.has(t)?s.set(t,[].concat(Object(U.a)(s.get(t)),[e.data])):s.set(t,[e.data])}));var l=Array.from(s,(function(e){var t=Object(q.a)(e,2);return{title:t[0],data:t[1]}}));console.log(l),r=l}}return Object(ie.jsx)(ue,{children:c?Object(ie.jsx)(Z.a,{sections:r,renderSectionHeader:function(e){var t=e.section;console.log("section",t);return Object(ie.jsx)(je,{text:t.title,additionalText:"lis\xe4teksti"})},renderItem:function(e){var t=e.item;return console.log("item to render",t),Object(ie.jsx)(se,{onPress:(t.archived,a),item:t})},keyExtractor:function(e,t){return t.toString()}}):Object(ie.jsx)($.a,{data:t,renderItem:n,keyExtractor:function(e,t){return t.toString()}})})},fe=n(52),pe=Object(fe.b)({name:"state",initialState:{connections:[]},reducers:{setConnections:function(e,t){console.log("setConnections called",t),e.connections=t.payload},addConnection:function(e,t){e.connections=e.connections.push(t.payload)},updateConnection:function(e,t){e.connections=[t.payload].concat(Object(U.a)(e.connections.filter((function(e){return e.id!==t.payload.id}))))}}}),xe=pe.actions,Oe=xe.setConnections,he=(xe.addConnection,xe.updateConnection),ge=pe.reducer,me=function(e){return{markAsSeen:function(){var t=Object(D.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("marking item",n,"as seen..."),console.log("socket",e),e.send({type:"seen",data:n.id});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ve=function(){var e=Object(r.c)((function(e){return e.socket.socket})),t=Object(c.useState)(null),n=Object(q.a)(t,2),o=n[0],a=n[1];e&&!o&&a(me(e));var s=Object(r.c)((function(e){return console.log("state connections",e.connections),e.connections.connections})),l=Object(U.a)(s);l.sort((function(e,t){return e.otherParty<t.otherParty?-1:e.otherParty>t.otherParty?1:0}));var d=Object(r.b)();Object(c.useEffect)((function(){(function(){var e=Object(D.a)(Y.a.mark((function e(){var t,n,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/connections"),{headers:{Accept:"application/json","Content-type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,console.log("data",n),e.next=9,fetch("".concat(S,"/hello"),{headers:{Accept:"application/json","Content-type":"application/json"}});case 9:o=e.sent,console.log("test",o),o&&n.length!==s.length&&d(Oe(n));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d]);return Object(ie.jsx)(K.a,{children:Object(ie.jsx)(be,{data:l,renderItem:function(e){var t=e.item,n=Object(i.a)({},t);n.title=t.otherParty;return Object(ie.jsx)(se,{onPress:function(e){return t=n,console.log("pressed connection item",t),t.expanded=!t.expanded,t.newItem&&o.markAsSeen(t),void d(he(t));var t},expanded:n.expanded,item:n})}})})},Se=function(){return Object(ie.jsx)(K.a,{})},ye=function(){return Object(ie.jsx)(K.a,{})},ke=function(e){var t=e.children;return"web"===O.a.OS?Object(ie.jsx)("img",Object(i.a)({src:t.type},t.props)):t},we=Object(fe.b)({name:"state",initialState:{credentials:[]},reducers:{setCredentials:function(e,t){e.credentials=t.payload},addCredentials:function(e,t){e.credentials=e.credentials.push(t.payload)}}}),Ce=we.actions,Be=Ce.setCredentials,ze=(Ce.addCredentials,we.reducer),Te=_.a.SafeAreaView(J||(J=Object(X.a)(["\n  background-color: ",";\n"])),"#F7F7F7"),Ie=function(){var e=Object(r.c)((function(e){return console.log("state",e),e.credentials.credentials})),t=Object(r.b)();return Object(c.useEffect)((function(){(function(){var e=Object(D.a)(Y.a.mark((function e(){var n,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/proofs"),{headers:{Accept:"application/json","Content-type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:o=e.sent,console.log("proofs",o),t(Be(o));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(ie.jsx)(Te,{children:Object(ie.jsx)(be,{data:e,renderItem:se,sections:!0})})},Ee=Object(x.a)(),Pe={height:"web"===O.a.OS?40:void 0},Ae=function(){var e=Object(r.c)((function(e){return e.connections.connections})),t=Object(r.c)((function(e){return e.credentials.credentials})),n=e.filter((function(e){return e.newItem})),o=t.filter((function(e){return e.newItem}));return console.log("newConnections",n),console.log("credentials",t),Object(ie.jsxs)(Ee.Navigator,{initialRouteName:"Yhteydet",screenOptions:{activeTintColor:h,headerTitleAlign:"center",headerStyle:Object(i.a)({backgroundColor:h},Pe),headerTitleStyle:{color:"white",fontSize:14},tabBarItemStyle:{margin:0},tabBarLabelStyle:{overflow:"visible",marginLeft:0},tabBarBadgeStyle:{backgroundColor:g,height:18,fontSize:12,top:1},tabBarLabelPosition:"below-icon",tabBarStyle:{borderBottomLeftRadius:"web"===O.a.OS?"3.5vh":"0",borderBottomRightRadius:"web"===O.a.OS?"3.5vh":"0"}},children:[Object(ie.jsx)(Ee.Screen,{name:"Yhteydet",component:ve,options:{tabBarIcon:function(e){e.size;var t=e.focused;e.color;return t?Object(ie.jsx)(ke,{children:Object(ie.jsx)(u,{})}):Object(ie.jsx)(ke,{children:Object(ie.jsx)(d,{})})},tabBarBadge:n.length>0?n.length:null}}),Object(ie.jsx)(Ee.Screen,{name:"Todisteet",component:Ie,options:{tabBarIcon:function(e){e.size;var t=e.focused;e.color;return t?Object(ie.jsx)(ke,{children:Object(ie.jsx)(l,{})}):Object(ie.jsx)(ke,{children:Object(ie.jsx)(s,{})})},tabBarBadge:o.length>0?o.length:null}}),Object(ie.jsx)(Ee.Screen,{name:"Skannaa",component:Se,options:{tabBarIcon:function(e){e.size;var t=e.focused;e.color;return t?Object(ie.jsx)(ke,{children:Object(ie.jsx)(p,{})}):Object(ie.jsx)(ke,{children:Object(ie.jsx)(f,{})})}}}),Object(ie.jsx)(Ee.Screen,{name:"Menu",component:ye,options:{tabBarIcon:function(e){e.size;var t=e.focused;e.color;return t?Object(ie.jsx)(ke,{children:Object(ie.jsx)(b,{})}):Object(ie.jsx)(ke,{children:Object(ie.jsx)(j,{})})}}})]})},Ve=n(264),He=n(261),We=n(132),Fe=Object(fe.b)({name:"state",initialState:{socket:void 0},reducers:{setSocket:function(e,t){console.log("settings socket to",t.payload),e.socket=t.payload},removeSocket:function(e,t){e.socket=void 0}}}),Re=Fe.actions,Me=Re.setSocket,Ge=Re.removeSocket,Le=Fe.reducer,Je=n(181),Ne=function(e){var t=e.children,n=Object(r.b)(),o=Object(r.c)((function(e){return e.socket.socket}));return console.log("reduxed socket",o),Object(c.useEffect)((function(){return console.log("useEffect"),function(){var e=Object(D.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("initSocket"),o){e.next=7;break}return console.log("no state socket"),t=Object(Je.io)(N,(function(e){console.log("socket",e)})),o||(console.log("dispatching to redux"),n(Me(t))),t.on("message",(function(e){console.log("message",e);try{console.log("msgdata",e.data),"update"===e.type&&console.log("received update")}catch(t){console.log(t)}})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){o&&(console.log("closing socket",o),o.close()),n(Ge())}}),[n]),Object(ie.jsx)(K.a,{style:{flexGrow:1},children:t})},Qe=new Ve.a,Ye=Object(fe.a)({reducer:{connections:ge,credentials:ze,socket:Le}}),De=function(){Object(We.a)();return Object(ie.jsx)(r.a,{store:Ye,children:Object(ie.jsx)(Ne,{children:Object(ie.jsx)(He.a,{client:Qe,children:Object(ie.jsx)(a.a,{children:Object(ie.jsx)(Ae,{})})})})})},Ue=n(122);o.a.registerComponent(Ue.a,(function(){return De})),o.a.runApplication(Ue.a,{rootTag:document.getElementById("root")})}},[[257,1,2]]]);
//# sourceMappingURL=main.4d3d7da3.chunk.js.map